{% extends 'base.html.twig' %}

{% block title %}Boutique - Liste des produits{% endblock %}

{% block body %}
<div class="container">
    <a href="/" class="btn btn-primary mb-3">Retour à l'accueil</a>
    
    <h1>Boutique</h1>

    <!-- Filtre par fourchette de prix -->
    <form method="get" action="{{ path('product_list') }}" class="mb-4">
        <label for="price_range">Fourchette de prix :</label>
        <select id="price_range" name="price_range" class="form-select" onchange="this.form.submit()">
            <option value="" {% if priceRange is null %}selected{% endif %}>Toutes</option>
            <option value="10-29" {% if priceRange == '10-29' %}selected{% endif %}>10 à 29 €</option>
            <option value="30-35" {% if priceRange == '30-35' %}selected{% endif %}>30 à 35 €</option>
            <option value="35-50" {% if priceRange == '35-50' %}selected{% endif %}>35 à 50 €</option>
        </select>
    </form>

    <!-- Liste des produits -->
    <div class="row">
        {% for product in products %}
            <div class="col-md-4">
                <div class="card mb-4">
                    <img src="{{ asset('imagesProduits/' ~ product.image) }}" class="card-img-top" alt="{{ product.name }}">
                    <div class="card-body">
                        <h5 class="card-title">{{ product.name }}</h5>
                        <p class="card-text">{{ product.price|number_format(2, ',', ' ') }} €</p>
                        <a href="{{ path('product_show', { id: product.id }) }}" class="btn btn-primary">Voir</a>
                    </div>
                </div>
            </div>
        {% else %}
            <p>Aucun produit trouvé pour cette fourchette de prix.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
